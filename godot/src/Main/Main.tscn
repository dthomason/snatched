[gd_scene load_steps=17 format=2]

[ext_resource path="res://assets/music/Borrow.mp3" type="AudioStream" id=1]
[ext_resource path="res://src/UI/Components/loginOrCreate.tscn" type="PackedScene" id=2]
[ext_resource path="res://src/UI/Menus/TitleScreen/cPUParticles2D.gd" type="Script" id=3]
[ext_resource path="res://src/UI/ParallaxBackground.tscn" type="PackedScene" id=4]
[ext_resource path="res://src/Main/Main.gd" type="Script" id=5]
[ext_resource path="res://src/UI/Menus/animated_burney.tres" type="SpriteFrames" id=6]
[ext_resource path="res://assets/sprite_sheets/single_diamond.png" type="Texture" id=9]
[ext_resource path="res://assets/theme/fonts/gemstone/Gemstone.ttf" type="DynamicFontData" id=10]
[ext_resource path="res://src/Props/CurveTween.gd" type="Script" id=13]
[ext_resource path="res://src/Props/diamond.gd" type="Script" id=18]

[sub_resource type="DynamicFont" id=5]
size = 192
outline_size = 4
outline_color = Color( 0.909804, 0.0705882, 0.0705882, 1 )
use_filter = true
extra_spacing_top = 36
extra_spacing_bottom = 3
extra_spacing_char = 12
font_data = ExtResource( 10 )

[sub_resource type="Shader" id=12]
code = "// Mandatory line to define 2D shaders
shader_type canvas_item;

// Allows us to assign a normal map to the shader in the Inspector
uniform sampler2D normal_map;

void fragment(){
	// Converts the texture data into a unit vector, with each channel in the [-1, 1] range

NORMAL = 2.0 * texture(normal_map, UV).rgb - 1.0;
}"

[sub_resource type="ShaderMaterial" id=13]
shader = SubResource( 12 )

[sub_resource type="Curve" id=14]
_data = [ Vector2( 0, 0 ), 0.0, -0.696465, 0, 0, Vector2( 1, 1 ), -1.01858, 0.0, 0, 0 ]

[sub_resource type="GDScript" id=11]
script/source = "extends CPUParticles2D


func _ready():
  pass

func _on_AnimationPlayer_animation_finished(anim_name):
  self.emitting = true
"

[sub_resource type="Animation" id=10]
length = 9.8
tracks/0/type = "value"
tracks/0/path = NodePath("AnimatedSprite:animation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0.9, 2.9, 4.3, 9.7 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 1,
"values": [ "fly", "stall", "fly", "fly" ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("AnimatedSprite:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 0.9, 2.8, 3.4, 3.7, 4.3, 5.2, 7.7, 9.7 ),
"transitions": PoolRealArray( 1, 0.189465, 1.51572, 0.707107, 1.6245, 1, 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 81.0002, 1217 ), Vector2( 81, 1217 ), Vector2( 1475, 242 ), Vector2( 1510.19, 600.432 ), Vector2( 1511, 583 ), Vector2( 1548, 1190 ), Vector2( 411, 1255 ), Vector2( 411, 1255 ), Vector2( 366, 522 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("AnimatedSprite:playing")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0.8, 2.9, 4.3 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 1,
"values": [ true, false, true ]
}
tracks/3/type = "value"
tracks/3/path = NodePath("AnimatedSprite:frame")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PoolRealArray( 2.8, 3.1, 3.4, 3.7, 3.9 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 1, 1, 2, 1, 1 ]
}
tracks/4/type = "value"
tracks/4/path = NodePath("ColorRect:color")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/keys = {
"times": PoolRealArray( 0, 1.6 ),
"transitions": PoolRealArray( 2.46229, 3.73213 ),
"update": 0,
"values": [ Color( 0, 0, 0, 1 ), Color( 0, 0, 0, 0 ) ]
}

[node name="Main" type="Node2D"]
script = ExtResource( 5 )

[node name="Control" type="Control" parent="."]
margin_top = -3.0
margin_right = 1920.0
margin_bottom = 1081.0

[node name="Container" type="CanvasLayer" parent="Control"]

[node name="Background" parent="Control/Container" instance=ExtResource( 4 )]
speed = 40

[node name="ToLobby" type="Control" parent="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_right = 1880.0
margin_bottom = 1040.0

[node name="CreateRoom" type="Control" parent="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_right = 1880.0
margin_bottom = 1056.0
__meta__ = {
"_edit_use_anchors_": true
}

[node name="JoinRoom" type="Control" parent="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
__meta__ = {
"_edit_use_anchors_": true
}

[node name="Landing" type="Control" parent="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 3.0
margin_bottom = 3.0
__meta__ = {
"_edit_use_anchors_": true
}

[node name="title" type="VBoxContainer" parent="Control/Landing"]
margin_top = 150.0
margin_right = 1920.0
margin_bottom = 414.0
__meta__ = {
"_edit_use_anchors_": true
}

[node name="label" type="Label" parent="Control/Landing/title"]
margin_right = 1920.0
margin_bottom = 232.0
custom_colors/font_color = Color( 0.862745, 0.54902, 0.54902, 1 )
custom_colors/font_color_shadow = Color( 0, 0, 0, 1 )
custom_constants/shadow_offset_x = 2
custom_fonts/font = SubResource( 5 )
text = "SNATCHED"
align = 1

[node name="loginOrCreate" parent="Control" instance=ExtResource( 2 )]
margin_left = 0.0
margin_top = 533.0
margin_right = 1.0
margin_bottom = 3.0
size_flags_horizontal = 5
size_flags_vertical = 5

[node name="ColorRect" type="ColorRect" parent="Control"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 3.0
margin_bottom = 3.0
color = Color( 0, 0, 0, 1 )

[node name="diamond" type="Sprite" parent="Control"]
material = SubResource( 13 )
position = Vector2( 974, 142 )
rotation = 0.35409
scale = Vector2( 1e-05, 1e-05 )
z_index = 1
texture = ExtResource( 9 )
script = ExtResource( 18 )

[node name="CurveTween" type="Tween" parent="Control/diamond"]
script = ExtResource( 13 )
curve = SubResource( 14 )

[node name="AnimatedSprite" type="AnimatedSprite" parent="Control"]
position = Vector2( 81.0002, 1220 )
rotation = 0.00486696
scale = Vector2( 1, 1 )
frames = ExtResource( 6 )
animation = "fly"
frame = 9
playing = true

[node name="second_confetti" type="CPUParticles2D" parent="Control"]
position = Vector2( 917, 166 )
rotation = 0.35409
scale = Vector2( 0.9, 0.9 )
emitting = false
amount = 100
lifetime = 63.99
one_shot = true
explosiveness = 1.0
emission_shape = 1
emission_sphere_radius = 128.0
flag_align_y = true
spread = 140.22
gravity = Vector2( 25, 100 )
initial_velocity = 288.82
initial_velocity_random = 0.25
radial_accel = 0.2
scale_amount = 4.0
scale_amount_random = 0.38
hue_variation = 0.1
hue_variation_random = 1.0
script = SubResource( 11 )

[node name="first_confetti" type="CPUParticles2D" parent="Control"]
position = Vector2( 917, 166 )
rotation = 0.35409
scale = Vector2( 0.9, 0.9 )
emitting = false
amount = 100
lifetime = 63.99
one_shot = true
explosiveness = 1.0
emission_shape = 1
emission_sphere_radius = 128.0
flag_align_y = true
spread = 140.22
gravity = Vector2( 25, 100 )
initial_velocity = 288.82
initial_velocity_random = 0.25
radial_accel = 0.2
scale_amount = 4.0
scale_amount_random = 0.38
hue_variation = 0.1
hue_variation_random = 1.0
script = ExtResource( 3 )

[node name="Timer" type="Timer" parent="Control/first_confetti"]
wait_time = 4.0
one_shot = true
autostart = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="Control"]
autoplay = "title_jet_pak"
anims/title_jet_pak = SubResource( 10 )

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="Control"]
stream = ExtResource( 1 )
autoplay = true

[connection signal="curve_tween" from="Control/diamond/CurveTween" to="Control/diamond" method="_on_CurveTween_curve_tween"]
[connection signal="timeout" from="Control/first_confetti/Timer" to="Control/first_confetti" method="_on_Timer_timeout"]
[connection signal="animation_finished" from="Control/AnimationPlayer" to="Control/diamond" method="_on_AnimationPlayer_animation_finished"]
[connection signal="animation_finished" from="Control/AnimationPlayer" to="Control/second_confetti" method="_on_AnimationPlayer_animation_finished"]
